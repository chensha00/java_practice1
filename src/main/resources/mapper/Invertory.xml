<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.4//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="domain.Invertory">
    <!--定义结果集-->
    <resultMap id="invertory" type="domain.Invertory">
        <id property="id" column="ID" jdbcType="BIGINT" javaType="java.lang.Long"/>
        <result property="storeId" column="STORE_ID" jdbcType="BIGINT" javaType="java.lang.Long"/>
        <result property="goodsId" column="GOODS_ID" jdbcType="BIGINT" javaType="java.lang.Long"/>
        <result property="price" column="PRICE" jdbcType="DECIMAL" javaType="java.lang.Double"/>
        <result property="number" column="NUMBER" jdbcType="DOUBLE" javaType="java.lang.Double"/>
    </resultMap>

    <!--sql语句-->
    <sql id="invertorySql">
        ID,STORE_ID,GOODS_ID,PRICE,NUMBER
    </sql>
    <!--查询所有-->
    <select id="getAll" resultType="java.util.Map" resultMap="invertory">
        SELECT
        <include refid="invertorySql"/>
        FROM INVERTORY
    </select>
    <!--根据店铺ID和商品ID查询库存-->
    <select id="storeAndGoods" resultType="java.util.Map" resultMap="invertory">
        SELECT
        <include refid="invertorySql"/>
        FROM INVERTORY
        WHERE STORE_ID=#{storeId} AND GOODS_ID=#{goodsId}
    </select>

    <!--添加-->
    <insert id="save">
        INSERT INTO INVERTORY(ID,STORE_ID,GOODS_ID,PRICE,NUMBER) VALUES(DEFAULT,
        ${invertory.storeId},${invertory.goodsId},${invertory.price},${invertory.number})
    </insert>
    <!--根据ID删除-->
    <delete id="deleteById">
        DELETE FROM INVERTORY WHERE ID=#{id}
    </delete>
    <!--根据ID进行修改-->
    <update id="updateById">
         UPDATE INVERTORY SET STORE_ID=${map.invertory.storeId},GOODS_ID=${map.invertory.goodsId},
         PRICE=${map.invertory.price},NUMBER=${map.invertory.number} WHERE ID=${map.id};
    </update>

</mapper>